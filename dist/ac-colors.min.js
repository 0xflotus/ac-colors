class Color{constructor({color:t=[0,0,0],type:r="rgb",precision:o=3,capitalize:a=!0}={color:[0,0,0],type:"rgb",precision:3,capitalize:!0}){this.updateColor(t,r),this.precision=o,this.capitalize=a}updateColor(t,r="rgb"){let o;switch(r=r.toLowerCase()){case"hsl":o=Color.hslToRgb(t);break;case"hex":o=Color.hexToRgb(t);break;case"xyz":o=Color.xyzToRgb(t);break;case"lab":o=Color.xyzToRgb(Color.labToXyz(t));break;case"lchab":o=Color.xyzToRgb(Color.labToXyz(Color.lchABToLab(t)));break;case"rgb":case"default":t=(t=(t=t.map(t=>Math.min(255,t))).map(t=>Math.max(0,t))).map(Math.round),this._rgb=t,this._hsl=Color.rgbToHsl(this._rgb),this._hex=Color.rgbToHex(this._rgb),this._xyz=Color.rgbToXyz(this._rgb),this._lab=Color.xyzToLab(this._xyz),this._lchab=Color.labToLCHab(this._lab)}"rgb"!=r&&this.updateColor(o,"rgb")}get rgb(){return this._rgb}get rgbString(){const t="RGB("+this.rgb.join(", ")+")";return this.capitalize?t.toUpperCase():t.toLowerCase()}set rgb(t){this.updateColor(t,"rgb")}get hsl(){return this._hsl}get hslString(){const t="HSL("+this.hsl.map(t=>t.toFixed(this.precision)).join(", ")+")";return this.capitalize?t.toUpperCase():t.toLowerCase()}set hsl(t){this.updateColor(t,"hsl")}get hex(){return this._hex}get hexString(){const t=this._hex;return this.capitalize?t.toUpperCase():t.toLowerCase()}set hex(t){this.updateColor(t,"hex")}get xyz(){return this._xyz}get xyzString(){const t="XYZ("+this.xyz.map(t=>t.toFixed(this.precision)).join(", ")+")";return this.capitalize?t.toUpperCase():t.toLowerCase()}set xyz(t){this.updateColor(t,"xyz")}get lab(){return this._lab}get labString(){const t="LAB("+this.lab.map(t=>t.toFixed(this.precision)).join(", ")+")";return this.capitalize?t.toUpperCase():t.toLowerCase()}set lab(t){this.updateColor(t,"lab")}get lchab(){return this._lchab}get lchabString(){let t=this.lchab.map(t=>t.toFixed(this.precision));return this.capitalize?"LCHab("+t.join(", ")+")":"lchAB("+t.join(", ")+")"}set lchab(t){this.updateColor(t,"lchab")}static rgbToHsl(t){let r=t[0]/255,o=t[1]/255,a=t[2]/255,e=Math.max(r,o,a),i=Math.min(r,o,a),s=(e+i)/2,l=0,h=0;return e!=i&&(l=s<.5?(e-i)/(e+i):(e-i)/(2-e-i),h=r==e?(o-a)/(e-i):o==e?2+(a-r)/(e-i):4+(r-o)/(e-i)),(h*=60)<0&&(h+=360),[h,l*=100,s*=100]}static hslToRgb(t){let r=t[0],o=t[1],a=t[2];var e,i,s,l,h,n;return isFinite(r)||(r=0),isFinite(o)||(o=0),isFinite(a)||(a=0),(r/=60)<0&&(r=6- -r%6),r%=6,o=Math.max(0,Math.min(1,o/100)),a=Math.max(0,Math.min(1,a/100)),n=(h=(1-Math.abs(2*a-1))*o)*(1-Math.abs(r%2-1)),r<1?(e=h,i=n,s=0):r<2?(e=n,i=h,s=0):r<3?(e=0,i=h,s=n):r<4?(e=0,i=n,s=h):r<5?(e=n,i=0,s=h):(e=h,i=0,s=n),l=a-h/2,[e=Math.round(255*(e+l)),i=Math.round(255*(i+l)),s=Math.round(255*(s+l))]}static rgbToHex(t){let r=t[0],o=t[1],a=t[2];var e=function(t){var r=t.toString(16);return 1==r.length?"0"+r:r};return"#"+e(r)+e(o)+e(a)}static hexToRgb(t){t=t.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,function(t,r,o,a){return r+r+o+o+a+a});var r=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t);return r?[parseInt(r[1],16),parseInt(r[2],16),parseInt(r[3],16)]:null}static rgbToXyz(t){let r=t[0]/255,o=t[1]/255,a=t[2]/255,e=t=>t<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4),i=e(r),s=e(o),l=e(a);return[100*(.4124564*i+.3575761*s+.1804375*l),100*(.2126729*i+.7151522*s+.072175*l),100*(.0193339*i+.119192*s+.9503041*l)]}static xyzToRgb(t){let r=t[0]/100,o=t[1]/100,a=t[2]/100,e=-.969266*r+1.8760108*o+.041556*a,i=.0556434*r+-.2040259*o+1.0572252*a,s=t=>t<=.0031308?12.92*t:1.055*Math.pow(t,1/2.4)-.055,l=s(3.2404542*r-1.5371385*o-.4985314*a),h=s(e),n=s(i);return[Math.round(255*l),Math.round(255*h),Math.round(255*n)]}static xyzToLab(t){let r=[95.04,100,108.884],o=t[0]/r[0],a=t[1]/r[1],e=t[2]/r[2],i=t=>t>216/24389?Math.pow(t,1/3):(24389/27*t+16)/116,s=i(o),l=i(a);return[116*l-16,500*(s-l),200*(l-i(e))]}static labToXyz(t){let r=t[0],o=t[1],a=[95.04,100,108.884],e=216/24389,i=24389/27,s=(r+16)/116,l=s-t[2]/200,h=o/500+s,n=Math.pow(h,3)>e?Math.pow(h,3):(116*h-16)/i,c=r>8?Math.pow((r+16)/116,3):r/i,b=Math.pow(l,3)>e?Math.pow(l,3):(116*l-16)/i;return[n*a[0],c*a[1],b*a[2]]}static labToLCHab(t){let r=t[1],o=t[2],a=Math.sqrt(r*r+o*o),e=Math.atan2(o,r)>=0?Math.atan2(o,r)/Math.PI*180:Math.atan2(o,r)/Math.PI*180+360;return[t[0],a,e]}static lchABToLab(t){let r=t[1],o=t[2],a=r*Math.cos(o/180*Math.PI),e=r*Math.sin(o/180*Math.PI);return[t[0],a,e]}static luminance(t,r="rgb"){"rgb"!=r&&(t=new Color({color:t,type:r}).rgb);for(let r=0;r<t.length;r++)t[r]/=255,t[r]<.03928?t[r]/=12.92:t[r]=Math.pow((t[r]+.055)/1.055,2.4);return.2126*t[0]+.7152*t[1]+.0722*t[2]}static random(){return new Color({color:[255*Math.random(),255*Math.random(),255*Math.random()]})}static randomOfType(t="rgb"){return Color.random()[t]}static randomOfTypeFormatted(t="rgb",r=!0,o=3){const a=Color.random();return a.capitalize=r,a.precision=o,a[t+"String"]}static contrastTextColor(t,r="rgb"){return Color.contrastRatio(new Color({color:[255,255,255]}),new Color({color:t,type:r}))>Color.contrastRatio(new Color({color:[0,0,0]}),new Color({color:t,type:r}))?"#FFFFFF":"#000000"}static contrastRatio(t=new Color({color:[0,0,0]}),r=new Color({color:[255,255,255]})){const o=Color.luminance(t.rgb)+.05,a=Color.luminance(r.rgb)+.05;return a>o?a/o:o/a}}