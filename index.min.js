class Color{constructor({color:t=[0,0,0],type:o="rgb",precision:r=3,capitalize:a=!0}={color:[0,0,0],type:"rgb",precision:3,capitalize:!0}){this.updateColor(t,o),this.precision=r,this.capitalize=a}updateColor(t,o="rgb"){let r;switch(o=o.toLowerCase()){case"hsl":r=Color.hslToRgb(t);break;case"hex":r=Color.hexToRgb(t);break;case"xyz":r=Color.xyzToRgb(t);break;case"lab":r=Color.xyzToRgb(Color.labToXyz(t));break;case"lchab":r=Color.xyzToRgb(Color.labToXyz(Color.lchABToLab(t)));break;case"rgb":case"default":t=(t=(t=t.map(t=>Math.min(255,t))).map(t=>Math.max(0,t))).map(Math.round),this._rgb=t,this._hsl=Color.rgbToHsl(this._rgb),this._hex=Color.rgbToHex(this._rgb),this._xyz=Color.rgbToXyz(this._rgb),this._lab=Color.xyzToLab(this._xyz),this._lchab=Color.labToLCHab(this._lab)}"rgb"!=o&&this.updateColor(r,"rgb")}get rgb(){return this._rgb}get rgbString(){const t="RGB("+this.rgb.join(", ")+")";return this.capitalize?t.toUpperCase():t.toLowerCase()}set rgb(t){this.updateColor(t,"rgb")}get hsl(){return this._hsl}get hslString(){const t="HSL("+this.hsl.map(t=>t.toFixed(this.precision)).join(", ")+")";return this.capitalize?t.toUpperCase():t.toLowerCase()}set hsl(t){this.updateColor(t,"hsl")}get hex(){return this._hex}get hexString(){const t=this._hex;return this.capitalize?t.toUpperCase():t.toLowerCase()}set hex(t){this.updateColor(t,"hex")}get xyz(){return this._xyz}get xyzString(){const t="XYZ("+this.xyz.map(t=>t.toFixed(this.precision)).join(", ")+")";return this.capitalize?t.toUpperCase():t.toLowerCase()}set xyz(t){this.updateColor(t,"xyz")}get lab(){return this._lab}get labString(){const t="LAB("+this.lab.map(t=>t.toFixed(this.precision)).join(", ")+")";return this.capitalize?t.toUpperCase():t.toLowerCase()}set lab(t){this.updateColor(t,"lab")}get lchab(){return this._lchab}get lchabString(){let t=this.lchab.map(t=>t.toFixed(this.precision));return this.capitalize?"LCHab("+t.join(", ")+")":"lchAB("+t.join(", ")+")"}set lchab(t){this.updateColor(t,"lchab")}static rgbToHsl(t){let o=t[0]/255,r=t[1]/255,a=t[2]/255,e=Math.max(o,r,a),i=Math.min(o,r,a),s=(e+i)/2,l=0,h=0;return e!=i&&(l=s<.5?(e-i)/(e+i):(e-i)/(2-e-i),h=o==e?(r-a)/(e-i):r==e?2+(a-o)/(e-i):4+(o-r)/(e-i)),(h*=60)<0&&(h+=360),[h,l*=100,s*=100]}static hslToRgb(t){let o=t[0],r=t[1],a=t[2];var e,i,s,l,h,n;return isFinite(o)||(o=0),isFinite(r)||(r=0),isFinite(a)||(a=0),(o/=60)<0&&(o=6- -o%6),o%=6,r=Math.max(0,Math.min(1,r/100)),a=Math.max(0,Math.min(1,a/100)),n=(h=(1-Math.abs(2*a-1))*r)*(1-Math.abs(o%2-1)),o<1?(e=h,i=n,s=0):o<2?(e=n,i=h,s=0):o<3?(e=0,i=h,s=n):o<4?(e=0,i=n,s=h):o<5?(e=n,i=0,s=h):(e=h,i=0,s=n),l=a-h/2,[e=Math.round(255*(e+l)),i=Math.round(255*(i+l)),s=Math.round(255*(s+l))]}static rgbToHex(t){let o=t[0],r=t[1],a=t[2];var e=function(t){var o=t.toString(16);return 1==o.length?"0"+o:o};return"#"+e(o)+e(r)+e(a)}static hexToRgb(t){t=t.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,function(t,o,r,a){return o+o+r+r+a+a});var o=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t);return o?[parseInt(o[1],16),parseInt(o[2],16),parseInt(o[3],16)]:null}static rgbToXyz(t){let o=t[0]/255,r=t[1]/255,a=t[2]/255,e=t=>t<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4),i=e(o),s=e(r),l=e(a);return[100*(.4124564*i+.3575761*s+.1804375*l),100*(.2126729*i+.7151522*s+.072175*l),100*(.0193339*i+.119192*s+.9503041*l)]}static xyzToRgb(t){let o=t[0]/100,r=t[1]/100,a=t[2]/100,e=-.969266*o+1.8760108*r+.041556*a,i=.0556434*o+-.2040259*r+1.0572252*a,s=t=>t<=.0031308?12.92*t:1.055*Math.pow(t,1/2.4)-.055,l=s(3.2404542*o-1.5371385*r-.4985314*a),h=s(e),n=s(i);return[Math.round(255*l),Math.round(255*h),Math.round(255*n)]}static xyzToLab(t){let o=[95.04,100,108.884],r=t[0]/o[0],a=t[1]/o[1],e=t[2]/o[2],i=t=>t>216/24389?Math.pow(t,1/3):(24389/27*t+16)/116,s=i(r),l=i(a);return[116*l-16,500*(s-l),200*(l-i(e))]}static labToXyz(t){let o=t[0],r=t[1],a=[95.04,100,108.884],e=216/24389,i=24389/27,s=(o+16)/116,l=s-t[2]/200,h=r/500+s,n=Math.pow(h,3)>e?Math.pow(h,3):(116*h-16)/i,c=o>8?Math.pow((o+16)/116,3):o/i,b=Math.pow(l,3)>e?Math.pow(l,3):(116*l-16)/i;return[n*a[0],c*a[1],b*a[2]]}static labToLCHab(t){let o=t[1],r=t[2],a=Math.sqrt(o*o+r*r),e=Math.atan2(r,o)>=0?Math.atan2(r,o)/Math.PI*180:Math.atan2(r,o)/Math.PI*180+360;return[t[0],a,e]}static lchABToLab(t){let o=t[1],r=t[2],a=o*Math.cos(r/180*Math.PI),e=o*Math.sin(r/180*Math.PI);return[t[0],a,e]}static luminance(t,o="rgb"){"rgb"!=o&&(t=new Color({color:t,type:o}).rgb);for(let o=0;o<t.length;o++)t[o]/=255,t[o]<.03928?t[o]/=12.92:t[o]=Math.pow((t[o]+.055)/1.055,2.4);return.2126*t[0]+.7152*t[1]+.0722*t[2]}static random(){return new Color({color:[255*Math.random(),255*Math.random(),255*Math.random()]})}static randomOfType(t="rgb"){return Color.random()[t]}static randomOfTypeFormatted(t="rgb",o=!0,r=3){const a=Color.random();return a.capitalize=o,a.precision=r,a[t+"String"]}static contrastTextColor(t,o="rgb"){return Color.contrastRatio(new Color({color:[255,255,255]}),new Color({color:t,type:o}))>Color.contrastRatio(new Color({color:[0,0,0]}),new Color({color:t,type:o}))?"#FFFFFF":"#000000"}static contrastRatio(t=new Color({color:[0,0,0]}),o=new Color({color:[255,255,255]})){const r=Color.luminance(t.rgb)+.05,a=Color.luminance(o.rgb)+.05;return a>r?a/r:r/a}}module.exports=Color;