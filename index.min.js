class Color{constructor({color:t,type:a="rgb",precision:r=3,capitalize:o=!0}){this.updateColor(t,a),this.precision=r,this.capitalize=o}updateColor(t,a="rgb"){let r;switch(a=a.toLowerCase()){case"hsl":r=Color.hslToRgb(t);break;case"hex":r=Color.hexToRgb(t);break;case"xyz":r=Color.xyzToRgb(t);break;case"lab":r=Color.xyzToRgb(Color.labToXyz(t));break;case"lchab":r=Color.xyzToRgb(Color.labToXyz(Color.lchABToLab(t)));break;case"rgb":case"default":t=(t=(t=t.map(t=>Math.min(255,t))).map(t=>Math.max(0,t))).map(Math.round),this._rgb=t,this._hsl=Color.rgbToHsl(this._rgb),this._hex=Color.rgbToHex(this._rgb),this._xyz=Color.rgbToXyz(this._rgb),this._lab=Color.xyzToLab(this._xyz),this._lchab=Color.labToLCHab(this._lab)}"rgb"!=a&&this.updateColor(r,"rgb")}get rgb(){return this._rgb}get rgbString(){const t="RGB("+this.rgb.join(", ")+")";return this.capitalize?t.toUpperCase():t.toLowerCase()}set rgb(t){this.updateColor(t,"rgb")}get hsl(){return this._hsl}get hslString(){const t="HSL("+this.hsl.map(t=>t.toFixed(this.precision)).join(", ")+")";return this.capitalize?t.toUpperCase():t.toLowerCase()}set hsl(t){this.updateColor(t,"hsl")}get hex(){return this._hex}get hexString(){const t=this._hex;return this.capitalize?t.toUpperCase():t.toLowerCase()}set hex(t){this.updateColor(t,"hex")}get xyz(){return this._xyz}get xyzString(){const t="XYZ("+this.xyz.map(t=>t.toFixed(this.precision)).join(", ")+")";return this.capitalize?t.toUpperCase():t.toLowerCase()}set xyz(t){this.updateColor(t,"xyz")}get lab(){return this._lab}get labString(){const t="LAB("+this.lab.map(t=>t.toFixed(this.precision)).join(", ")+")";return this.capitalize?t.toUpperCase():t.toLowerCase()}set lab(t){this.updateColor(t,"lab")}get lchab(){return this._lchab}get lchabString(){let t=this.lchab.map(t=>t.toFixed(this.precision));return this.capitalize?"LCHab("+t.join(", ")+")":"lchAB("+t.join(", ")+")"}set lchab(t){this.updateColor(t,"lchab")}static rgbToHsl(t){let a=t[0]/255,r=t[1]/255,o=t[2]/255,e=Math.max(a,r,o),i=Math.min(a,r,o),s=(e+i)/2,h=0,n=0;return e!=i&&(h=s<.5?(e-i)/(e+i):(e-i)/(2-e-i),n=a==e?(r-o)/(e-i):r==e?2+(o-a)/(e-i):4+(a-r)/(e-i)),(n*=60)<0&&(n+=360),[n,h*=100,s*=100]}static hslToRgb(t){let a=t[0],r=t[1],o=t[2];var e,i,s,h,n,l;return isFinite(a)||(a=0),isFinite(r)||(r=0),isFinite(o)||(o=0),(a/=60)<0&&(a=6- -a%6),a%=6,r=Math.max(0,Math.min(1,r/100)),o=Math.max(0,Math.min(1,o/100)),l=(n=(1-Math.abs(2*o-1))*r)*(1-Math.abs(a%2-1)),a<1?(e=n,i=l,s=0):a<2?(e=l,i=n,s=0):a<3?(e=0,i=n,s=l):a<4?(e=0,i=l,s=n):a<5?(e=l,i=0,s=n):(e=n,i=0,s=l),h=o-n/2,[e=Math.round(255*(e+h)),i=Math.round(255*(i+h)),s=Math.round(255*(s+h))]}static rgbToHex(t){let a=t[0],r=t[1],o=t[2];var e=function(t){var a=t.toString(16);return 1==a.length?"0"+a:a};return"#"+e(a)+e(r)+e(o)}static hexToRgb(t){t=t.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,function(t,a,r,o){return a+a+r+r+o+o});var a=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t);return a?[parseInt(a[1],16),parseInt(a[2],16),parseInt(a[3],16)]:null}static rgbToXyz(t){let a=t[0]/255,r=t[1]/255,o=t[2]/255,e=t=>t<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4),i=e(a),s=e(r),h=e(o);return[100*(.4124564*i+.3575761*s+.1804375*h),100*(.2126729*i+.7151522*s+.072175*h),100*(.0193339*i+.119192*s+.9503041*h)]}static xyzToRgb(t){let a=t[0]/100,r=t[1]/100,o=t[2]/100,e=-.969266*a+1.8760108*r+.041556*o,i=.0556434*a+-.2040259*r+1.0572252*o,s=t=>t<=.0031308?12.92*t:1.055*Math.pow(t,1/2.4)-.055,h=s(3.2404542*a-1.5371385*r-.4985314*o),n=s(e),l=s(i);return[Math.round(255*h),Math.round(255*n),Math.round(255*l)]}static xyzToLab(t){let a=[95.04,100,108.884],r=t[0]/a[0],o=t[1]/a[1],e=t[2]/a[2],i=t=>t>216/24389?Math.pow(t,1/3):(24389/27*t+16)/116,s=i(r),h=i(o);return[116*h-16,500*(s-h),200*(h-i(e))]}static labToXyz(t){let a=t[0],r=t[1],o=[95.04,100,108.884],e=216/24389,i=24389/27,s=(a+16)/116,h=s-t[2]/200,n=r/500+s,l=Math.pow(n,3)>e?Math.pow(n,3):(116*n-16)/i,b=a>8?Math.pow((a+16)/116,3):a/i,c=Math.pow(h,3)>e?Math.pow(h,3):(116*h-16)/i;return[l*o[0],b*o[1],c*o[2]]}static labToLCHab(t){let a=t[1],r=t[2],o=Math.sqrt(a*a+r*r),e=Math.atan2(r,a)>=0?Math.atan2(r,a)/Math.PI*180:Math.atan2(r,a)/Math.PI*180+360;return[t[0],o,e]}static lchABToLab(t){let a=t[1],r=t[2],o=a*Math.cos(r/180*Math.PI),e=a*Math.sin(r/180*Math.PI);return[t[0],o,e]}static luminance(t,a="rgb"){"rgb"!=a&&(t=new Color(t,a).rgb);for(let a=0;a<t.length;a++)t[a]/=255,t[a]<.03928?t[a]/=12.92:t[a]=Math.pow((t[a]+.055)/1.055,2.4);return.2126*t[0]+.7152*t[1]+.0722*t[2]}static random(){return new Color([255*Math.random(),255*Math.random(),255*Math.random()])}static randomOfType(t="rgb"){return new Color([255*Math.random(),255*Math.random(),255*Math.random()])[t]}static contrastTextColor(t){return Color.contrastRatio(new Color("FFFFFF"))>(Color.luminance(t,type)+.05)/.05?"#FFFFFF":"#000000"}static contrastRatio(t,a){let r=Color.luminance(t.rgb)+.05,o=Color.luminance(a.rgb)+.05;return o>r?o/r:r/o}}module.exports=Color;